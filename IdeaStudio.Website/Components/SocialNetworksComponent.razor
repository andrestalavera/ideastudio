@using IdeaStudio.Website.Services
@inherits LocalizedComponent

<div class="d-flex gap-2 @(Vertical ? "flex-column" : "")">
    <a href="https://www.linkedin.com/in/andrestalavera/"
       class="@GetButtonClasses("dark")"
       target="_blank"
       rel="noopener noreferrer"
       aria-label="@_linkedInText Profile">
        <i class="fab fa-linkedin me-1" aria-hidden="true"></i>
        <span class="@GetTextClasses()">@_linkedInText</span>
    </a>

    <a href="https://github.com/andrestalavera"
       class="@GetButtonClasses("secondary")"
       target="_blank"
       rel="noopener noreferrer"
       aria-label="@_gitHubText Profile">
        <i class="fab fa-github me-1" aria-hidden="true"></i>
        <span class="@GetTextClasses()">@_gitHubText</span>
    </a>

    <button class="@GetButtonClasses("primary")"
            onclick="Calendly.initPopupWidget({url: 'https://calendly.com/andres-talavera/30min'});return false;"
            aria-label="@_scheduleMeetingText">
        <i class="fas fa-video me-1" aria-hidden="true"></i>
        <span class="@GetTextClasses()">@_meetText</span>
    </button>
</div>

@code {
    [Parameter] public bool Vertical { get; set; } = false;
    [Parameter] public string Size { get; set; } = "sm"; // sm, md, lg
    [Parameter] public bool ShowText { get; set; } = true;

    private string _linkedInText = "LinkedIn";
    private string _gitHubText = "GitHub";
    private string _meetText = "Meet";
    private string _scheduleMeetingText = "Schedule a meeting";

    protected override async Task LoadLocalizedStringsAsync()
    {
        await base.LoadLocalizedStringsAsync();
        LoadTexts();
    }

    private void LoadTexts()
    {
        _linkedInText = LocalizationService.GetString("LinkedIn");
        _gitHubText = LocalizationService.GetString("GitHub");
        _meetText = LocalizationService.GetString("Meet");
        _scheduleMeetingText = LocalizationService.GetString("ScheduleMeeting");
    }

    private string GetButtonClasses(string variant = "light") => $"btn btn-{variant} btn-{Size} bg-acrylic rounded-pill";

    private string GetTextClasses()
    {
        if (!ShowText) return "d-none";

        return Size switch
        {
            "lg" => "d-none d-md-inline",
            "md" => "d-none d-lg-inline",
            _ => "d-none d-xl-inline"
        };
    }
}
