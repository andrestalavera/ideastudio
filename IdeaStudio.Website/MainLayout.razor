@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

<div id="loading-overlay" class="loading-overlay position-fixed top-0 start-0 w-100 h-100 bg-acrylic-1 d-print-none"
	data-bs-theme="dark">
	<div class="loading-content d-flex justify-content-center align-items-center h-100 z-3">
		<div class="card bg-light text-bg-light text-primary bg-opacity-75 bg-acrylic-1">
			<div class="card-body text-center p-5">
				<div class="spinner-border mb-3" role="status" aria-label="Loading application">
					<span class="visually-hidden">Loading...</span>
				</div>
				<h1 class="h4 mb-2">IdeaStud.io</h1>
				<p>Loading amazing content...</p>
			</div>
		</div>
	</div>
</div>

<div id="background-layers" class="position-fixed top-0 start-0 w-100 h-100 d-print-none" style="z-index: -5;">
	<div id="video-background" class="position-absolute top-0 start-0 w-100 h-100">
		<video autoplay muted loop playsinline class="position-absolute top-0 start-0 w-100 h-100 object-fit-cover"
			style="opacity: 0" poster="images/video-background.png" preload="metadata">
			<source src="images/background.webm" type="video/webm">
			<source src="images/background.mp4" type="video/mp4">
		</video>
	</div>

	<div class="background-overlay position-absolute top-0 start-0 w-100 h-100"></div>
</div>

<div class="d-flex flex-column min-vh-100">
	<a href="#main-content"
		class="skip-link visually-hidden-focusable position-absolute top-0 start-0 z-3 btn btn-primary">
		Skip to main content
	</a>

	<nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-opacity-25 sticky-top border-0 border-bottom border-opacity-25 d-print-none"
		data-bs-spy="scroll" data-bs-target="#navbar-nav" data-bs-offset="70">
		<div class="container">
			<a class="navbar-brand fw-bold d-flex align-items-center" href="/" aria-label="IdeaStudio - Home">
				<img src="images/logo-ideastudio-white.svg" alt="IdeaStudio" class="d-inline-block align-text-top me-2"
					height="40" width="100" loading="eager">
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-nav"
				aria-controls="navbar-nav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbar-nav">
				<ul class="navbar-nav me-auto">
					<li class="nav-item">
						<a class="nav-link rounded-pill mx-1" href="#about" data-section="about">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link rounded-pill mx-1" href="#experiences"
							data-section="experiences">Experiences</a>
					</li>
					<li class="nav-item">
						<a class="nav-link rounded-pill mx-1" href="#training" data-section="training">Training</a>
					</li>
					<li class="nav-item">
						<a class="nav-link rounded-pill mx-1" href="#contact" data-section="contact">Contact</a>
					</li>
				</ul>

				<div class="d-flex gap-2">
					<a href="https://www.linkedin.com/in/andrestalavera/"
						class="btn btn-light btn-sm bg-acrylic-2 rounded-pill" target="_blank" rel="noopener noreferrer"
						aria-label="LinkedIn Profile">
						<i class="fab fa-linkedin me-1" aria-hidden="true"></i>
						<span class="d-none d-xl-inline">LinkedIn</span>
					</a>
					<a href="https://github.com/andrestalavera" class="btn btn-light btn-sm bg-acrylic-2 rounded-pill"
						target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile">
						<i class="fab fa-github me-1" aria-hidden="true"></i>
						<span class="d-none d-xl-inline">GitHub</span>
					</a>
					<button class="btn btn-primary btn-sm bg-acrylic-1 rounded-pill"
						onclick="Calendly.initPopupWidget({url: 'https://calendly.com/andres-talavera/30min'});return false;"
						aria-label="Schedule a meeting">
						<i class="fas fa-video me-1" aria-hidden="true"></i>
						<span class="d-none d-xl-inline">Meet</span>
					</button>
				</div>
			</div>
		</div>
	</nav>

	<main id="main-content" class="flex-grow-1 text-primary" role="main">
		@Body
	</main>

	<footer class="mt-auto py-4 text-center d-print-none">
		<div class="container">
			<div class="card bg-light text-bg-light text-primary bg-opacity-75 bg-acrylic-1 border-0">
				<div class="card-body py-3">
					<p class="mb-0">@DateTime.Now.Year IdeaStud.io - Andrés Talavera. All rights reserved.</p>
					<small class="opacity-75">
						<a href="/privacy" class="text-decoration-none">Privacy Policy</a> |
						<a href="/legal" class="text-decoration-none">Legal Mentions</a>
					</small>
				</div>
			</div>
		</div>
	</footer>
</div>

@code {
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender)
		{
			await JSRuntime.InvokeVoidAsync("initializeScrollSpy");
			await JSRuntime.InvokeVoidAsync("initializeLoadingAnimation");
		}
	}
}
